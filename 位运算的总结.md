# 位运算的性质及其应用
取反（NOT、~）、按位或（OR、|）、按位异或（XOR、^）、按位与（AND、&）、左移（<<）、右移（>>）

## 1、定义
1. 双目运算符
|:或，对应位有一个为1的时候就为1
^:异或，对应位不同为1，相同为0，也可以看作是不进位的加法
&:与，对应位同时为1的时候才为1

2. 单目运算
~:取反，单目运算，0变1，1变0

3. 移位运算
.<<:将对应二进制向左移动一定位置i，即2乘以2的i次方
.>>:将对应二进制向右移动一定位置i，即2除以2的i次方

## 2、一些注意点
1. 位运算就是基于整数的二进制表示进行的运算。由于计算机内部就是以二进制来存储数据，位运算是相当快的，一般情况下可以认为时间为O(1)
2. 位运算的优先级比较低，除了取反，优先级都低于算数运算符，所以在操作的时候注意优先级，需要添加括号
3. 移位操作涉及有符号和无符号类型，为了简便我们默认为无符号，且操作都是有效的


## 3、应用
* 移位运算：正如定义所说
.<<为乘以 2 的非负整数次幂
.>>为除以 2 的非负整数次幂

* 判断n为否为2的正整数幂：
return n > 0 && (n & (n - 1)) == 0

* 消去n的二进制位最后一位的1
n & (n - 1)

* 对 2 的非负整数次幂取模：
return x & (mod - 1)

* 判断符号是否相同（均不为0的情况）
return (x ^ y) >= 0

* 交换值（并不一定快）
a ^= b
b ^= a
a ^= b

* 异或运算可逆（两次异或结果不变）
a ^ b ^ b = a
或、与运算不可逆，是单向的
而异或交换率、结合律、分配率都满足
a | b = b | a
a & b = b & a
a ^ b = b ^ a

* 判断奇偶(取出最后一位)
a & 1 等价于 a % 2(结果等于0为偶,位运算效率高)

* 异或一些运算
a ^ a = 0 (去重常用)

a ^ 0 = a (置换常用)

a ^ (~0) = ~a (取反的另一种写法)

a ^ b ==0 (比较两值是否相等)

a ^ b >= 0 (判断符号是否相同)

* 其他
a & (1<<i) (取出第i+1位)

a |=1<<i (i+1位 置1)

a &=~(1<<i) (i+1位 置0)

a ^ (1<<i) (i+1位 反转)


在对应i+1位，插入b的对应位；
a |=1<<i; （a的bit位置1）
a & (b & 1<<i) （与b的bit位相与）
(置1后相与=置0后相或)

保留最后i-1位；
a & ((1<<i)-1)

清零最后i-1位；
a & ~((1<<i)-1)

删除最后的1；
a & (a-1) (可用于判断2的幂数)

仅保留最后一个1;
a & (-a)

得到最高位的1；
a = a |(a>>1);
a = a |(a>>2);
a = a |(a>>4);
a = a |(a>>8);
a = a |(a>>16);
return (a+1)>>1;


a|0 = a
a&1 = a
a&0 = 0

a^a = 0
a^0 =a

a|~a = 1
a&~a = 0
a&a = a
a|a = a

a|(a&b) = a
a&(a|b) = a

## 4、参考链接
[位运算总结](https://zhuanlan.zhihu.com/p/37167219)
[OI Wiki](https://oi-wiki.org/math/bit/)
